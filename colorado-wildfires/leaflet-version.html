<!doctype html>
<html>

<head>
    <!-- http://lyzidiamond.com/posts/external-geojson-and-leaflet-the-other-way -->
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
    <style type="text/css">
    body {
        padding: 0;
        margin: 0;
    }
    
    html,
    body,
    #wildfire-map {
        height: 100%;
    }
    </style>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
</head>

<body>
    <div id="wildfire-map"></div>
    <script>
    var wildfireTiles = L.tileLayer('http://a.tiles.mapbox.com/v3/lyzidiamond.map-ietb6srb/{z}/{x}/{y}.png', {
        maxZoom: 18
    });

    $.getJSON("wildfires.js", function(data) {
        var geojson = L.geoJson(data, {
            pointToLayer: function(feature, latlng) {
                var popupOptions = {
                    maxWidth: 200
                };
                var popupContent = feature.properties.fireName;
                // } onEachFeature: function(feature, layer) { // layer.bindPopup(feature.properties.fireName);


                function getOptions(properties) {
                    if (properties.fireStatus === 'Active') {
                        return {
                            radius: (properties.fireAcres / 75),
                            color: 'red',
                            fillColor: 'red'
                        };
                    } else {
                        return {
                            radius: (properties.fireAcres / 75),
                            color: 'blue',
                            fillColor: 'blue'
                        };
                    }
                }
                return L.circleMarker(latlng, getOptions(feature.properties)).bindPopup(popupContent, popupOptions);

            }
        });
        var map = L.map('wildfire-map').fitBounds(geojson.getBounds());
        wildfireTiles.addTo(map);
        geojson.addTo(map);
    });
    </script>
</body>

</html>
